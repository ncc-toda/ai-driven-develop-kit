# リファクタリングワークフロー

このワークフローに従ってリファクタリングを行います。
**t_wada 式 TDD（Red-Green-Refactor）** で進めること。
ユーザーから受け取った作業内容を元に、以下の手順を順番に実行してください。

---

## STEP 1: 作業ログ作成

[作業ログ](./_common/log.md) に従い、作業ログを作成すること。

## STEP 2: 現状分析と方針決定

以下を分析すること:

- 現状の問題点（複雑性、重複、凝集度など）
- リファクタリングの目標
- 変更範囲の特定

## STEP 3: テスト確認

既存のテストが十分にあることを確認すること。
不足している場合は、リファクタリング前にテストを追加すること。
テストが全てパスすることを確認すること。

## STEP 4: リファクタリング実施

方針に従って段階的にリファクタリングを実施すること。
**重要**: 振る舞いを変えないこと。

問題が発生した場合は作業ログに記録すること。

## STEP 5: 検証

[静的解析・テスト手順](./_common/qa.md) を実行すること。
すべてのテストがパスすることを確認すること。

## STEP 6: セルフレビュー

[セルフレビュー手順](./_common/review.md) を実行すること。
追加で以下も確認:

- 振る舞いが変わっていないか
- リファクタリングの目標を達成したか
- 過度な変更をしていないか

問題があれば修正し、STEP 5 に戻ること。

## STEP 7: 完了

1. [作業ログ](./_common/log.md) の「作業完了時の振り返り」を実施すること
2. 必要に応じてドキュメント・ルールを更新すること
3. [Git 運用ルール](../git/git-index.md) に従いコミットすること
4. ユーザーに完了報告すること
