# Git ルール（リリース後）

リリース後フェーズにおける Git 運用ルールです。

## Issue ベース開発

本プロジェクトでは **Issue ベース**で開発を進めます。

### 基本原則

- **1 Issue = 1 ブランチ = 1 PR** の原則を守る
- すべての作業は Issue を起点として開始する
- Issue なしでの直接コミットは原則禁止

### 開発フロー

```txt
1. Issue を作成する
2. Issue に紐づくブランチを作成する
3. 作業を行い、コミットする
4. PR を作成し、Issue と紐づける
5. マージ後、Issue をクローズする
```

## ブランチ戦略

### メインブランチ

- `main`: 本番環境用のブランチ。常に安定した状態を維持する

### 作業ブランチ

作業ブランチには **Issue 番号**を含めます。

```txt
[type]/[Issue番号]-[簡潔な説明]
```

| type      | 用途               |
| --------- | ------------------ |
| `feature` | 機能追加・機能改善 |
| `fix`     | バグ修正           |
| `chore`   | 開発環境・その他   |

#### 例

| Issue                      | ブランチ名                        |
| -------------------------- | --------------------------------- |
| #1 TypeScript 設定を追加   | `feature/1-add-typescript-config` |
| #5 pre-commit が動作しない | `fix/5-pre-commit-not-working`    |
| #10 devbox に Dart を追加  | `chore/10-add-dart-to-devbox`     |

作業ブランチは `main` ブランチから派生させ、マージ時には `main` ブランチにマージする

## プルリクエスト（PR）のルール

### PR のテンプレート

PR を作成する際は、`.github/pull_request_template.md` のテンプレートに従って内容を記載します。

### PR のタイトル

```txt
[type]: [内容]
```

例: `feat: Flutter プロジェクトのテンプレートを追加`

### PR 作成時の注意点

- 作業ブランチが最新の `main` ブランチと同期されていることを確認する
- PR のタイトルは必ず `[type]: [内容]` の形式で記載する
- 変更内容の概要と目的を記載する
- **必ず関連する Issue を紐づける**（`closes #xxx` で自動クローズ）

### GitHub MCP を使った Pull Request 作成

ユーザーからの指示で Pull Request の作成を求められた場合は GitHub MCP を使って作成してください。

## マージのルール

1. **マージ条件**
   - 必要なレビューが完了していること
   - コンフリクトが解消されていること

2. **マージ方法**
   - 基本的に「Squash and merge」を使用
   - コミットメッセージは `[type]: [内容] [emoji]` の形式に統一

3. **マージ後**
   - 作業ブランチは削除する

## その他のルール

1. **コードレビュー**
   - PR を出す前に自己レビューを行う
   - `devbox run lint` でエラーがないことを確認する
   - コメントには建設的な提案を含める

2. **コンフリクト解決**
   - コンフリクトは作業ブランチ側で解決する
   - 必要に応じて `main` ブランチを定期的にマージする
