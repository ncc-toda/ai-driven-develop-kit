# 機能追加ワークフロー

このワークフローに従って機能追加を行います。
**t_wada 式 TDD（Red-Green-Refactor）** で進めること。
ユーザーから受け取った作業内容を元に、以下の手順を順番に実行してください。

---

## STEP 1: 作業ログ作成

[作業ログ](../_parts/log.md) に従い、作業ログを作成すること。

## STEP 2: インターフェース設計 (SDD)

以下を確認・設計すること:

- 既存のスキーマ（DB, API, 型定義）との整合性
- 新機能に必要なデータ構造、関数シグネチャ

必要に応じて型定義ファイルを先に作成すること。

## STEP 3: 完了条件の定義 (TDD)

以下を定義すること:

- 期待される振る舞いをテストコードで記述（Red 状態）
- ユーザーが確認すべき動作（Acceptance Criteria）

**ユーザーの承認を得てから次のステップに進むこと。**

## STEP 4: 実装

定義したスキーマ・型に基づき、最小限のコードで機能を実装すること。
問題が発生した場合は作業ログに記録すること。

## STEP 5: 検証 (1回目)

[静的解析・テスト手順](../_parts/qa.md) を実行すること。

## STEP 6: リファクタリング

「動く」だけでなく「保守できる」状態にすること:

- DRY 原則の適用
- 凝集度の向上
- 不要な抽象化の排除

## STEP 7: 検証 (2回目)

[静的解析・テスト手順](../_parts/qa.md) を再度実行すること。

## STEP 8: セルフレビュー

[セルフレビュー手順](../_parts/review.md) を実行すること。
追加で以下も確認:

- SDD に沿った責務分離ができているか
- 既存構造を壊していないか

問題があれば修正し、STEP 7 に戻ること。

## STEP 9: 完了

1. [作業ログ](../_parts/log.md) の「作業完了時の振り返り」を実施すること
2. 必要に応じてドキュメント・ルールを更新すること
3. [Git 運用ルール](../../git/git-index.md) に従いコミットすること
4. ユーザーに完了報告すること
