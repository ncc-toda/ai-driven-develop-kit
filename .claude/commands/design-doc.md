# 設計書作成ワークフロー

API設計、DB設計、画面設計などの設計書を作成するワークフローです。

## 使い方

````bash
/wf-design-doc 設計対象と種別（API/DB/画面/クラス等）
```bash

---

## STEP 1: 作業ログ作成

`docs/tasks/ai-logs/YYYY-MM-DD_{slug}.md` に作業ログを作成すること。

## STEP 2: 設計対象の確認

以下を確認すること:

- 設計対象の機能・コンポーネント
- 関連する要件定義
- 既存設計との関連

## STEP 3: 設計書種別の選択

作成する設計書の種別を決定すること:

- **API 設計**: エンドポイント、リクエスト/レスポンス、認証
- **DB 設計**: テーブル定義、ER 図、インデックス
- **画面設計**: ワイヤーフレーム、画面遷移、UI コンポーネント
- **クラス設計**: クラス図、責務、依存関係
- **シーケンス設計**: 処理フロー、メッセージング

## STEP 4: 設計の実施

選択した種別に応じて設計を行うこと。

### API 設計の場合

- エンドポイント一覧
- 各エンドポイントの詳細（メソッド、パス、パラメータ）
- リクエスト/レスポンス形式（JSON スキーマ等）
- エラーレスポンス
- 認証・認可方式

### DB 設計の場合

- テーブル定義（カラム、型、制約）
- ER 図
- インデックス設計
- マイグレーション方針

### 画面設計の場合

- 画面一覧
- ワイヤーフレーム
- 画面遷移図
- UI コンポーネント定義
- バリデーションルール

### クラス/モジュール設計の場合

- クラス図
- 各クラスの責務
- 依存関係・インターフェース
- 主要メソッドのシグネチャ

## STEP 5: 整合性確認

以下を確認すること:

- 要件定義との整合性
- 他の設計書との整合性
- 技術的な実現可能性

## STEP 6: ユーザー確認

**設計書をユーザーに提示し、承認を得ること。**

## STEP 7: 実装タスクの作成

詳細設計から実装タスクを洗い出し、`docs/tasks/pre-release/index.md` に追記すること。

### 追加するタスク例

設計種別に応じてタスクを作成:

- **API**: 各エンドポイント、認証、バリデーション
- **DB**: マイグレーション、モデル、リポジトリ
- **画面**: コンポーネント、画面遷移、フォーム
- **クラス**: 各クラス、インターフェース、テスト

### 記載フォーマット

```markdown
## 📋 TODO

### 実装フェーズ

- [ ] POST /api/users 実装
- [ ] GET /api/users/:id 実装
- [ ] ユーザー認証ミドルウェア
- [ ] ログイン画面
```

### ポイント

- 設計書の要素を実装単位に分解
- TDD を意識（テスト作成も含める）
- シンプルなチェックリストで十分

## STEP 8: 完了

1. 作業ログの「振り返り」セクションを記入すること
2. 設計書を `docs/specs/` に保存すること
3. タスクリストが更新されていることを確認すること
4. Git コミットすること
5. ユーザーに完了報告すること
````
